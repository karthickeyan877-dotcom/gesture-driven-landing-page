<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nike Air Max // 2026 Neural Interface</title>
    <link href="https://fonts.googleapis.com/css2?family=Bruno+Ace+SC&display=swap" rel="stylesheet">
    <style>
        :root { 
            --accent: #00f2ff; 
            --glow: rgba(0, 242, 255, 0.6);
            --bezel-color: rgba(255, 255, 255, 0.9);
            --panel-bg: rgba(0, 0, 0, 0.9);
        }
        
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; 
            background: radial-gradient(circle at 50% 50%, #00F2FF -150%, #000000 100%); 
            font-family: 'Inter', sans-serif; color: white; 
        }

        #bg-watermark { 
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
            font-size: 18vw; font-weight: 900; color: rgba(0, 242, 255, 0.03);
            opacity: 0.8; pointer-events: none; z-index: 1; letter-spacing: -1vw; filter: blur(2px);
            text-align: center; width: 100%; line-height: 0.8; font-family: 'Bruno Ace SC';
        }

        #glass-interface {
            position: absolute; top: 4%; left: 3%; width: 94%; height: 92%;
            background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(0,0,0,0.2));
            backdrop-filter: blur(40px) saturate(180%); -webkit-backdrop-filter: blur(40px) saturate(180%);
            border-radius: 65px; border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 80px 150px rgba(0,0,0,0.9), inset 0 0 50px rgba(0,242,255,0.05);
            z-index: 10; overflow: hidden;
        }

        nav { position: absolute; top: 0; left: 0; width: 100%; height: 100px; display: flex; align-items: center; justify-content: space-between; padding: 0 60px; box-sizing: border-box; z-index: 200; }
        .nav-left { display: flex; align-items: center; min-width: 150px; }
        .swoosh { width: 60px; fill: white; cursor: pointer; transition: 0.3s; }
        .nav-center { display: flex; align-items: center; gap: 25px; font-size: 11px; font-weight: 700; letter-spacing: 1.5px; }
        .nav-center a { color: white; text-decoration: none; opacity: 0.6; transition: 0.3s; }
        .nav-center a:hover { opacity: 1; text-shadow: 0 0 10px var(--accent); }
        .nav-separator { width: 40px; height: 1px; background: rgba(255,255,255,0.2); margin: 0 10px; }
        .nav-active { opacity: 1 !important; position: relative; }
        .nav-active::after { content: ''; position: absolute; bottom: -12px; left: 50%; transform: translateX(-50%); width: 4px; height: 4px; background: var(--accent); border-radius: 50%; box-shadow: 0 0 10px var(--accent); }
        .nav-right { display: flex; align-items: center; gap: 30px; min-width: 150px; justify-content: flex-end; }
        .stroke-icon { cursor: pointer; opacity: 0.7; transition: 0.3s; fill: none; stroke: white; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }
        .stroke-icon:hover { opacity: 1; filter: drop-shadow(0 0 5px var(--accent)); stroke: var(--accent); }

        #settings-panel {
            position: absolute; top: 110px; right: -300px; width: 220px;
            background: var(--panel-bg); border-radius: 20px; padding: 25px;
            border: 1px solid rgba(0,242,255,0.2); z-index: 250;
            transition: right 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            display: flex; flex-direction: column; gap: 15px; box-shadow: 0 20px 40px rgba(0,0,0,0.8);
        }
        #settings-panel.open { right: 40px; }
        #settings-trigger { cursor: pointer; display: flex; flex-direction: column; gap: 5px; }
        .burger-line { width: 22px; height: 2px; background: white; transition: 0.3s; }
        .setting-row { display: flex; flex-direction: column; gap: 10px; margin-bottom: 5px; }
        .setting-label { font-size: 11px; font-weight: 700; color: #fff; display: flex; justify-content: space-between; opacity: 0.9; letter-spacing: 0.5px; }
        .setting-label span { opacity: 0.5; font-family: monospace; }
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]::-webkit-slider-runnable-track { height: 2px; background: rgba(0,242,255,0.2); }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 14px; width: 14px; border-radius: 50%; background: var(--accent); margin-top: -6px; cursor: pointer; box-shadow: 0 0 10px var(--accent); }

        .ui-container { position: absolute; top: 52%; left: 0; width: 100%; transform: translateY(-50%); display: flex; justify-content: space-between; padding: 0 80px; box-sizing: border-box; pointer-events: none; z-index: 100; }
        .left-panel { pointer-events: auto; display: flex; flex-direction: column; gap: 10px; }
        .air-max-stack { display: flex; flex-direction: column; line-height: 0.8; font-size: 48px; font-weight: 900; color: var(--accent); font-family: 'Bruno Ace SC'; text-shadow: 0 0 20px rgba(0,242,255,0.3); }
        .product-title { font-size: 64px; font-weight: 900; margin: 0; text-transform: uppercase; letter-spacing: -4px; font-family: 'Bruno Ace SC'; }
        .product-desc { opacity: 0.4; font-size: 13px; margin-top: -5px; max-width: 420px; line-height: 1.5; letter-spacing: 0.2px; }

        .right-panel { pointer-events: auto; text-align: right; display: flex; flex-direction: column; align-items: flex-end; gap: 25px; }
        .price-display { font-size: 90px; line-height: 0.8; font-weight: 900; letter-spacing: -3px; transform: scaleY(1.1); font-family: 'Bruno Ace SC'; }
        .buy-btn { background: transparent; border: 2.5px solid var(--accent); color: var(--accent); padding: 14px 45px; border-radius: 50px; font-size: 24px; font-family: 'Bruno Ace SC'; cursor: pointer; transition: 0.4s; }
        .buy-btn:hover { background: var(--accent); color: black; box-shadow: 0 0 30px var(--accent); }

        #bottom-controls { position: absolute; bottom: 0; left: 0; width: 100%; height: 100px; display: flex; align-items: center; justify-content: space-between; padding: 0 60px; box-sizing: border-box; z-index: 200; }
        .pagination-dots { display: flex; gap: 12px; align-items: center; }
        .dot { width: 6px; height: 6px; background: rgba(255,255,255,0.2); border-radius: 50%; }
        .dot.active { background: var(--accent); box-shadow: 0 0 10px var(--accent); width: 8px; height: 8px; }

        .cam-preview { position: absolute; bottom: 120px; right: 40px; width: 140px; height: 90px; border-radius: 20px; overflow: hidden; border: 2px solid var(--accent); z-index: 120; box-shadow: 0 0 30px rgba(0,242,255,0.3); background: black; }
        #video-feed, #mesh-overlay { width: 100%; height: 100%; transform: scaleX(-1); object-fit: cover; position: absolute; top: 0; left: 0; }
        #video-feed { opacity: 0.35; }
        #three-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 55; pointer-events: none; }
        
        .sys-link { position: absolute; top: 8px; left: 10px; font-family: monospace; font-size: 7px; color: var(--accent); z-index: 130; letter-spacing: 0.5px; pointer-events: none; text-shadow: 0 0 5px var(--accent); }
    </style>
</head>
<body>

    <div id="bg-watermark">JUST DO IT</div>

    <div id="glass-interface">
        <nav>
            <div class="nav-left"><svg class="swoosh" viewBox="0 0 24 24"><path d="M21 7.28c-2.31 1.45-6.19 3.65-8.31 4.67-1.12.54-2.27 1.12-3.41 1.63-.58.26-1.14.51-1.68.74-.54.23-1.04.44-1.52.63-.48.19-.92.35-1.32.49-.4.14-.76.25-1.09.34-.33.09-.62.15-.87.19-.25.04-.46.06-.63.07-.17.01-.3.01-.39 0h-.03c-.09 0-.15-.02-.19-.05-.04-.03-.06-.07-.06-.11 0-.04.01-.09.04-.15.03-.06.07-.13.12-.22.05-.09.11-.2.18-.32.07-.12.15-.26.24-.41.09-.15.19-.32.29-.5.1-.18.21-.37.33-.57.12-.2.24-.41.36-.63.12-.2.24-.41.36-.63.12-.2.24-.41.36-.63.12-.22.25-.45.37-.68l.01-.02c.13-.24.26-.49.38-.74l.01-.02c.12-.26.24-.52.34-.78.1-.26.2-.52.29-.78.09-.26.17-.51.24-.76.07-.25.13-.49.18-.72.05-.23.09-.45.12-.66.03-.21.05-.4.06-.57.01-.17.01-.32 0-.45-.01-.13-.03-.24-.05-.33-.02-.09-.05-.16-.08-.21-.03-.05-.06-.08-.1-.1-.04-.02-.08-.03-.13-.03-.05 0-.1.01-.16.03l-.03.01c-.13.04-.3.12-.5.23-.2.11-.42.26-.67.45-.25.19-.52.42-.81.69-.29.27-.6.58-.92.93-.32.35-.65.73-1 1.14-.35.41-.7 1.1-.7 1.1s2.12-4.14 5.61-5.46c2.14-.81 4.61-.41 6.37.95 1.54 1.19 2.05 3.09 1.45 5.02z"/></svg></div>
            <div class="nav-center"><a href="#">MEN</a><a href="#">WOMEN</a><div class="nav-separator"></div><a href="#">CASUAL</a><a href="#" class="nav-active">SPORT</a></div>
            <div class="nav-right">
                <svg class="stroke-icon" width="22" height="22" viewBox="0 0 24 24"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
                <div id="settings-trigger"><div class="burger-line"></div><div class="burger-line" style="width: 14px; align-self: flex-end;"></div></div>
            </div>
        </nav>

        <div class="ui-container">
            <div class="left-panel">
                <div class="air-max-stack"><span>AIR</span><span>MAX</span></div>
                <h1 class="product-title">RUNNING-SHOES</h1>
                <p class="product-desc">Nothing feels as fast, as comfortable, or as trusted. The Air Max stays true to its legacy with the iconic waffle sole, stitched overlays, and classic TPU accents.</p>
            </div>
            <div class="right-panel">
                <div class="price-display">$210</div>
                <div style="display:flex; gap:40px; font-size:10px; text-transform:uppercase; letter-spacing:1px; opacity:0.8;">
                    <div>SIZE ▼<br><span style="font-size:16px; opacity:1;">40</span></div>
                    <div>COLOR ▼<br><span style="font-size:16px; opacity:1;">BINARY BLUE</span></div>
                </div>
                <button class="buy-btn">Buy Now</button>
            </div>
        </div>

        <div id="settings-panel">
            <svg style="width:22px; margin-bottom:5px" viewBox="0 0 24 24" fill="none" stroke="#00F2FF" stroke-width="2"><path d="M4 21v-7m0-4V3m8 18v-9m0-4V3m8 18v-5m0-4V3M2 14h4m4-6h4m4 8h4"/></svg>
            <div class="setting-row"><div class="setting-label">Position X <span id="val-posX">0.000</span></div><input type="range" id="posX" min="-5" max="5" step="0.001" value="0"></div>
            <div class="setting-row"><div class="setting-label">Position Y <span id="val-posY">-0.800</span></div><input type="range" id="posY" min="-5" max="5" step="0.001" value="-0.8"></div>
            <div class="setting-row"><div class="setting-label">Position Z <span id="val-posZ">0.000</span></div><input type="range" id="posZ" min="-10" max="5" step="0.001" value="0"></div>
            <div class="setting-row"><div class="setting-label">Scale <span id="val-scale">32.000</span></div><input type="range" id="scale" min="10" max="60" step="0.001" value="32"></div>
            <div class="setting-row"><div class="setting-label">Rotation <span id="val-rot">-22°</span></div><input type="range" id="rot" min="-180" max="180" step="1" value="-22"></div>
        </div>

        <div id="bottom-controls">
            <div style="display: flex; gap: 20px;"><svg class="stroke-icon" width="24" height="24" viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"></polyline></svg><svg class="stroke-icon" width="24" height="24" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"></polyline></svg></div>
            <div class="pagination-dots"><div class="dot"></div><div class="dot active"></div><div class="dot"></div><div class="dot"></div></div>
            <div style="display: flex; gap: 15px;"><svg class="stroke-icon" width="18" height="18" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><circle cx="12" cy="12" r="4"></circle></svg><svg class="stroke-icon" width="18" height="18" viewBox="0 0 24 24"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></div>
        </div>

        <div class="cam-preview">
            <div class="sys-link">SYSTEM.LINK // ACTIVE</div>
            <video id="video-feed" autoplay playsinline></video>
            <canvas id="mesh-overlay"></canvas>
        </div>
        <div id="three-canvas"></div>
    </div>

    <script type="importmap">{ "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js", "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/", "mediapipe": "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3" } }</script>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { FaceLandmarker, HandLandmarker, FilesetResolver, DrawingUtils } from "mediapipe";

        let scene, camera, renderer, faceLandmarker, handLandmarker, video, shoe, shadowPlane, canvasElement, canvasCtx, drawingUtils;
        let headPos = { x: 0, y: 0 }, targetHeadPos = { x: 0, y: 0 };
        const state = { posX: 0, posY: -0.8, posZ: 0, scale: 32, rot: -22 };
        let prevFingerX = null;

        async function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 0, 11);
            
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true, powerPreference: "high-performance" });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.4;
            document.getElementById('three-canvas').appendChild(renderer.domElement);
            
            canvasElement = document.getElementById('mesh-overlay');
            canvasCtx = canvasElement.getContext('2d');
            drawingUtils = new DrawingUtils(canvasCtx);
            
            scene.add(new THREE.AmbientLight(0xffffff, 0.4));
            const keyLight = new THREE.DirectionalLight(0xffffff, 4.5); keyLight.position.set(5, 8, 5); scene.add(keyLight);
            const fillLight = new THREE.DirectionalLight(0x00F2FF, 1.5); fillLight.position.set(-5, 2, 2); scene.add(fillLight);
            const rimLight = new THREE.SpotLight(0xffffff, 12, 50, 0.3, 1); rimLight.position.set(-10, 10, -10); scene.add(rimLight);
            scene.add(new THREE.HemisphereLight(0xffffff, 0x000000, 2));

            // --- 3D GRID ROOM ADDITION ---
            const gridHelper = new THREE.Group();
            const gridMaterial = new THREE.LineBasicMaterial({ color: 0x00F2FF, transparent: true, opacity: 0.15 });
            const boxSize = 40;
            const divisions = 20;
            const step = boxSize / divisions;

            // Generate Floor and Ceiling Grids
            for (let i = 0; i <= divisions; i++) {
                const coord = (i * step) - (boxSize / 2);
                // Floor/Ceiling lines along Z
                const lineZGeo = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(coord, -5, -20), new THREE.Vector3(coord, -5, 20)]);
                const lineZCeilGeo = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(coord, 15, -20), new THREE.Vector3(coord, 15, 20)]);
                gridHelper.add(new THREE.Line(lineZGeo, gridMaterial), new THREE.Line(lineZCeilGeo, gridMaterial));
                
                // Floor/Ceiling lines along X
                const lineXGeo = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(-20, -5, coord), new THREE.Vector3(20, -5, coord)]);
                const lineXCeilGeo = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(-20, 15, coord), new THREE.Vector3(20, 15, coord)]);
                gridHelper.add(new THREE.Line(lineXGeo, gridMaterial), new THREE.Line(lineXCeilGeo, gridMaterial));

                // Vertical Wall lines
                const lineVGeo = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(-20, -5, coord), new THREE.Vector3(-20, 15, coord)]);
                const lineVRightGeo = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(20, -5, coord), new THREE.Vector3(20, 15, coord)]);
                gridHelper.add(new THREE.Line(lineVGeo, gridMaterial), new THREE.Line(lineVRightGeo, gridMaterial));
            }
            scene.add(gridHelper);

            // --- Shadow Plane ---
            shadowPlane = new THREE.Mesh(new THREE.PlaneGeometry(8, 8), new THREE.MeshBasicMaterial({ map: createSoftShadowMap(), transparent: true, opacity: 0.35, depthWrite: false }));
            shadowPlane.rotation.x = -Math.PI / 2; shadowPlane.position.y = -3.2; scene.add(shadowPlane);

            document.getElementById('settings-trigger').onclick = () => document.getElementById('settings-panel').classList.toggle('open');
            ['posX', 'posY', 'posZ', 'scale', 'rot'].forEach(key => {
                document.getElementById(key).oninput = (e) => {
                    const val = parseFloat(e.target.value); state[key] = val;
                    document.getElementById(`val-${key}`).innerText = key === 'rot' ? Math.round(val) + '°' : val.toFixed(3);
                };
            });

            new GLTFLoader().load('https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/MaterialsVariantsShoe/glTF-Binary/MaterialsVariantsShoe.glb', (gltf) => {
                shoe = gltf.scene;
                shoe.traverse(n => { if (n.isMesh) { n.material.envMapIntensity = 2.5; n.material.needsUpdate = true; } });
                scene.add(shoe); setupTracking();
            });
        }

        function createSoftShadowMap() {
            const canvas = document.createElement('canvas'); canvas.width = 128; canvas.height = 128;
            const ctx = canvas.getContext('2d');
            const grad = ctx.createRadialGradient(64, 64, 0, 64, 64, 60);
            grad.addColorStop(0, 'rgba(0,0,0,1)'); grad.addColorStop(1, 'rgba(0,0,0,0)');
            ctx.fillStyle = grad; ctx.fillRect(0, 0, 128, 128);
            return new THREE.CanvasTexture(canvas);
        }

        async function setupTracking() {
            video = document.getElementById("video-feed");
            const fr = await FilesetResolver.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/wasm");
            faceLandmarker = await FaceLandmarker.createFromOptions(fr, { baseOptions: { modelAssetPath: `https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task`, delegate: "GPU" }, runningMode: "VIDEO", numFaces: 1 });
            handLandmarker = await HandLandmarker.createFromOptions(fr, { baseOptions: { modelAssetPath: `https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task`, delegate: "GPU" }, runningMode: "VIDEO", numHands: 1 });
            const s = await navigator.mediaDevices.getUserMedia({ video: true });
            video.srcObject = s;
            video.onloadeddata = () => { canvasElement.width = video.videoWidth; canvasElement.height = video.videoHeight; animate(); };
        }

        function animate() {
            const now = performance.now();
            canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);
            
            if (video.readyState >= 2) {
                if (faceLandmarker) {
                    const res = faceLandmarker.detectForVideo(video, now);
                    if (res.faceLandmarks?.[0]) {
                        targetHeadPos.x = (res.faceLandmarks[0][1].x - 0.5) * 4.5; 
                        targetHeadPos.y = (res.faceLandmarks[0][1].y - 0.5) * -2.5;
                        drawingUtils.drawLandmarks(res.faceLandmarks[0], { color: "#00f2ff", lineWidth: 0, radius: (d) => d.index % 2 === 0 ? 0.6 : 0.3 });
                    }
                }
                if (handLandmarker) {
                    const hres = handLandmarker.detectForVideo(video, now);
                    if (hres.landmarks?.[0]) {
                        const tip = hres.landmarks[0][8]; 
                        if (prevFingerX !== null) {
                            state.rot -= (tip.x - prevFingerX) * 450;
                            document.getElementById('rot').value = state.rot;
                            document.getElementById('val-rot').innerText = Math.round(state.rot) + '°';
                        }
                        prevFingerX = tip.x;
                        drawingUtils.drawLandmarks(hres.landmarks[0], { color: "#00f2ff", lineWidth: 1, radius: 1.8 });
                    } else prevFingerX = null;
                }
            }

            headPos.x += (targetHeadPos.x - headPos.x) * 0.05;
            headPos.y += (targetHeadPos.y - headPos.y) * 0.05;
            camera.projectionMatrix.elements[8] = headPos.x * 0.5;
            camera.projectionMatrix.elements[9] = headPos.y * 0.5;
            
            if (shoe) {
                const hover = (Math.sin(now * 0.001) * 0.15);
                shoe.position.set(state.posX, state.posY + hover, state.posZ);
                shoe.scale.setScalar(state.scale);
                shoe.rotation.y = THREE.MathUtils.degToRad(state.rot);
                shoe.rotation.z = headPos.x * 0.05;
                shadowPlane.position.x = state.posX;
                shadowPlane.scale.setScalar(state.scale / 32); 
                shadowPlane.material.opacity = 0.35 - (hover * 0.5);
            }
            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        init();
    </script>
</body>
</html>
